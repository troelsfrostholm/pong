var GameObject = function() {
    this.components = [];
};

GameObject.sendMessage = function() {
    message = arguments.shift();
    for(i=0; i<this.components.length; i++) {
	if(typeof(this.components[i][message]) == "function") {
	    this.components[i][message].apply(components[i], arguments);
	}
    }
};

var RenderComponent = function(image) {
    this.image = image;
};

RenderComponent.update = function() {
    super.sendMessage("beforeRender");
    context.drawImage(this.image, -this.image.width/2, -this.image.height/2);
    super.sendMessage("afterRender");
};

var TransformationComponent = function(position, angle) {
    this.position = position || [0, 0];
    this.angle = angle || 0;
};

TransformationComponent.beforeRender = function() {
    context.save();
    context.translate(this.position[0], this.position[1]);
    context.rotate(this.angle);
};

TransformationComponent.afterRender = function() {
    context.restore();
};